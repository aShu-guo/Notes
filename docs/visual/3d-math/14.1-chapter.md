# 包围体检测

这里的包围体指的是将物体组合完全包围的一个封闭空间，其中AABB边界框是包围体的一种

![img.png](/imgs/visual/3d-math/visibility-check.png)

得到物体的包围体之后，判断相交、可视时只需要对包围体进行判断即可

## 基于视锥的检测

判断包围盒的8个顶点是否都在一个或多个裁剪面的外部，例如：都在顶裁剪面的上面，那么这个物体便是不可见的，图中左下角的图形是不可见的

![img.png](/imgs/visual/3d-math/visibility-check-1.png)

但是对于右上角的图形，虽然包围盒是不可见的，但是它的8个顶点并不是都在裁剪面的外部（一部分在顶裁剪面的外部、一部分在右裁剪面的外部）

好在这种情况并不常见，判断是否可见时就需要使用上节的[背面剔除和裁剪](/visual/3d-math/13.9-chapter.md)技术：用包围盒的各面分别对视锥体裁剪，如果所有的面都裁剪掉了，那么就意味着包围体是不可见的

## 遮断检测

一般来说，探测包围盒是否被其他物体遮断是非常困难的。一种计算出包围盒的顶点，在z-buffer中检测是否像素可见，这种技术称为z-检测

参考：

【1】[包围体](https://zh.wikipedia.org/wiki/%E5%8C%85%E5%9B%B4%E4%BD%93)
